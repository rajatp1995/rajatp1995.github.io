<html>
<head>
<head>
  <title>Smart Shopping Cart</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
</head>
<body>
<div class="container">
<h3><center><u>Smart Cart</u></center></h3>
<br>
<marquee><b><i> Welcome to Smart Shopping Cart Interface, start by connecting your shopping cart.</i></b></marquee>
<br><br>
<form action="astaralgo.html" id="fish">
	<input type="text" name="cartno" placeholder="Enter Cart Number">
	<br>
	<br>
    <input type="submit" name="submit" onclick="myFunctio()">
	<br>
	<br>

</form>

<button id="myButton" class="float-left submit-button" >Add/Remove items</button>
<br>
<br>
<button onclick="startt()">Find Bluetooth device</button>
</div>
</body>
</html>

<script src="https://www.gstatic.com/firebasejs/4.9.0/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.9.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.9.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.9.0/firebase-database.js"></script>

<script type="text/javascript">
// Step 1: Scan for a device with 0xffe5 service
function startt()
{
navigator.bluetooth.requestDevice({
  filters: [{ acceptAllDevices: true }]
})
  .then(function(device) {
    // Step 2: Connect to it
    return device.gatt.connect();
  })
  .then(function(server) {
    // Step 3: Get the Service
    return server.getPrimaryService(0xffe5);
  })
  .then(function(service) {
    // Step 4: get the Characteristic
    return service.getCharacteristic(0xffe9);
  })
  .then(function(characteristic) {
    // Step 5: Write to the characteristic
    var data = new Uint8Array([0xbb, 0x25, 0x05, 0x44]);
    return characteristic.writeValue(data);
  })
  .catch(function(error) {
     // And of course: error handling!
     console.error('Connection failed!', error);
  });
}
</script>

<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCn_P-dbq07eDimEGzS8qMGObW1JP_U4ts",
    authDomain: "projectdatabase-d5dcc.firebaseapp.com",
    databaseURL: "https://projectdatabase-d5dcc.firebaseio.com",
    projectId: "projectdatabase-d5dcc",
    storageBucket: "projectdatabase-d5dcc.appspot.com",
    messagingSenderId: "289821114496"
  };
  firebase.initializeApp(config);

  var checklst = new Array();

  var complist = firebase.database().ref();
  complist.on('value', function(namee){
  namee.forEach(function(childSnapshot) {
        var key = childSnapshot.key;
        var childData = childSnapshot.val();
        checklst = checklst + key + ",";
        sessionStorage.setItem('fbase',checklst);
    });
});
 
</script>

<script type="text/javascript">	

	document.getElementById("myButton").onclick = function () {
    location.href = "ownerpage.html";
    };

	var textu = "";
	var myData;

	function myFunctio() {
    var x = document.getElementById("fish");
    var i;
    for (i = 0; i < x.length ;i++) {
        textu += x.elements[i].value;
    }
    sessionStorage.setItem('cartnumber', textu);
    }

    

</script>